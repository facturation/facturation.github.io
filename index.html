<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>API & web service de facturation pour entreprise - Accueil</title> <meta name="Description" content="API JSON de facturation pour facturer automatiquement les clients de votre entreprise, à partir de votre site ou de votre système d'information."> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Accueil | API facturation</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Accueil" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="API JSON de facturation pour facturer automatiquement les clients de votre entreprise, à partir de votre site ou de votre système d’information." /> <meta property="og:description" content="API JSON de facturation pour facturer automatiquement les clients de votre entreprise, à partir de votre site ou de votre système d’information." /> <link rel="canonical" href="/" /> <meta property="og:url" content="/" /> <meta property="og:site_name" content="API facturation" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Accueil" /> <meta name="twitter:site" content="@facturation" /> <script type="application/ld+json"> {"description":"API JSON de facturation pour facturer automatiquement les clients de votre entreprise, à partir de votre site ou de votre système d’information.","headline":"Accueil","url":"/","@type":"WebSite","name":"API facturation","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Lien</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Rechercher</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Deplier</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> API facturation </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="/" class="nav-list-link active"> Accueil </a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/clients/" class="nav-list-link"> Clients </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/clients/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/clients/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/clients/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/clients/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/clients/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/clients/archive.html" class="nav-list-link"> archiver </a></li><li class="nav-list-item "><a href="/api/clients/unarchive.html" class="nav-list-link"> désarchiver </a></li><li class="nav-list-item "><a href="/api/clients/upload.html" class="nav-list-link"> upload </a></li><li class="nav-list-item "><a href="/api/clients/invoices.html" class="nav-list-link"> factures </a></li><li class="nav-list-item "><a href="/api/clients/quotes.html" class="nav-list-link"> devis </a></li><li class="nav-list-item "><a href="/api/clients/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/devis/" class="nav-list-link"> Devis </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/devis/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/devis/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/devis/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/devis/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/devis/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/devis/download.html" class="nav-list-link"> télécharger </a></li><li class="nav-list-item "><a href="/api/devis/proforma.html" class="nav-list-link"> proforma </a></li><li class="nav-list-item "><a href="/api/devis/invoice.html" class="nav-list-link"> facturer </a></li><li class="nav-list-item "><a href="/api/devis/email.html" class="nav-list-link"> email </a></li><li class="nav-list-item "><a href="/api/devis/upload.html" class="nav-list-link"> upload </a></li><li class="nav-list-item "><a href="/api/devis/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/factures/" class="nav-list-link"> Factures </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/factures/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/factures/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/factures/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/factures/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/factures/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/factures/download.html" class="nav-list-link"> télécharger </a></li><li class="nav-list-item "><a href="/api/factures/refund.html" class="nav-list-link"> avoir </a></li><li class="nav-list-item "><a href="/api/factures/email.html" class="nav-list-link"> email </a></li><li class="nav-list-item "><a href="/api/factures/reglements.html" class="nav-list-link"> règlements </a></li><li class="nav-list-item "><a href="/api/factures/recurring.html" class="nav-list-link"> factures récurrentes </a></li><li class="nav-list-item "><a href="/api/factures/upload.html" class="nav-list-link"> upload </a></li><li class="nav-list-item "><a href="/api/factures/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/reglements/" class="nav-list-link"> Règlements </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/reglements/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/reglements/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/reglements/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/reglements/destroy.html" class="nav-list-link"> supprimer </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/fournisseurs/" class="nav-list-link"> Fournisseurs </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/fournisseurs/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/fournisseurs/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/fournisseurs/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/fournisseurs/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/fournisseurs/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/fournisseurs/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/achats/" class="nav-list-link"> Achats </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/achats/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/achats/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/achats/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/achats/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/achats/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/achats/upload.html" class="nav-list-link"> upload </a></li><li class="nav-list-item "><a href="/api/achats/recurring.html" class="nav-list-link"> achats récurrents </a></li><li class="nav-list-item "><a href="/api/achats/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/fichiers/" class="nav-list-link"> Fichiers </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/fichiers/quotes.html" class="nav-list-link"> devis </a></li><li class="nav-list-item "><a href="/api/fichiers/invoices.html" class="nav-list-link"> factures </a></li><li class="nav-list-item "><a href="/api/fichiers/customers.html" class="nav-list-link"> clients </a></li><li class="nav-list-item "><a href="/api/fichiers/purchases.html" class="nav-list-link"> achats </a></li><li class="nav-list-item "><a href="/api/fichiers/attach.html" class="nav-list-link"> ajouter </a></li><li class="nav-list-item "><a href="/api/fichiers/destroy.html" class="nav-list-link"> supprimer </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/produits/" class="nav-list-link"> Produits </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/produits/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/produits/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/produits/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/produits/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/produits/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/produits/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/categories/" class="nav-list-link"> Catégories </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/categories/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/categories/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/categories/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/categories/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/categories/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/categories/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/suivi_commercial/" class="nav-list-link"> Suivis </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/suivi_commercial/find.html" class="nav-list-link"> lister </a></li><li class="nav-list-item "><a href="/api/suivi_commercial/create.html" class="nav-list-link"> créer </a></li><li class="nav-list-item "><a href="/api/suivi_commercial/show.html" class="nav-list-link"> détails </a></li><li class="nav-list-item "><a href="/api/suivi_commercial/update.html" class="nav-list-link"> modifier </a></li><li class="nav-list-item "><a href="/api/suivi_commercial/destroy.html" class="nav-list-link"> supprimer </a></li><li class="nav-list-item "><a href="/api/suivi_commercial/champs.html" class="nav-list-link"> champs </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/compte/" class="nav-list-link"> Compte </a><ul class="nav-list "><li class="nav-list-item "><a href="/api/compte/show.html" class="nav-list-link"> infos </a></li><li class="nav-list-item "><a href="/api/compte/orders.html" class="nav-list-link"> abonnement </a></li></ul></li><li class="nav-list-item"><a href="/api/collaborateurs/" class="nav-list-link"> Collaborateurs </a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/values/" class="nav-list-link"> Valeurs spécifiques </a><ul class="nav-list "><li class="nav-list-item "><a href="/values/language.html" class="nav-list-link"> language </a></li><li class="nav-list-item "><a href="/values/currency.html" class="nav-list-link"> currency </a></li><li class="nav-list-item "><a href="/values/payment_invoice.html" class="nav-list-link"> payment_mode (facture) </a></li><li class="nav-list-item "><a href="/values/payment_purchase.html" class="nav-list-link"> payment_mode (achat) </a></li><li class="nav-list-item "><a href="/values/pay_before.html" class="nav-list-link"> pay_before </a></li><li class="nav-list-item "><a href="/values/nature.html" class="nav-list-link"> nature </a></li><li class="nav-list-item "><a href="/values/status_followup.html" class="nav-list-link"> status (suivi commercial) </a></li><li class="nav-list-item "><a href="/values/status_category.html" class="nav-list-link"> status (catégorie) </a></li><li class="nav-list-item "><a href="/values/quote_status.html" class="nav-list-link"> quote_status </a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/liquid/" class="nav-list-link"> Langage Liquid </a><ul class="nav-list "><li class="nav-list-item "><a href="/liquid/invoice.html" class="nav-list-link"> Facture </a></li><li class="nav-list-item "><a href="/liquid/quote.html" class="nav-list-link"> Devis </a></li><li class="nav-list-item "><a href="/liquid/customer.html" class="nav-list-link"> Client </a></li><li class="nav-list-item "><a href="/liquid/dates.html" class="nav-list-link"> Dates </a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/liquid/exemples/" class="nav-list-link"> Exemples </a><ul class="nav-list"><li class="nav-list-item "> <a href="/liquid/exemples/langues.html" class="nav-list-link"> Plusieurs langues </a> </li><li class="nav-list-item "> <a href="/liquid/exemples/civilite.html" class="nav-list-link"> Civilités </a> </li><li class="nav-list-item "> <a href="/liquid/exemples/rib.html" class="nav-list-link"> RIB multiples </a> </li></ul></li></ul></li><li class="nav-list-item"><a href="/outils.html" class="nav-list-link"> Outils </a></li></ul> </nav> <footer class="site-footer"> </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Rechercher dans l'API" aria-label="Rechercher dans l'API" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://www.facturation.pro" class="site-button" target="_blank" rel="noopener noreferrer" > Facturation.pro </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h1>Accueil </h1> <p>Retrouvez ici toutes les informations sur l’API de facturation en ligne de <a href="https://www.monae.fr">MonAE</a> et <a href="https://www.matpe.com">MaTPE</a>. Notre service permet de facturer simplement et efficacement vos clients, que ce soit via l’extranet <a href="https://www.facturation.pro">Facturation.pro</a>, ou via vos propres services en vous appuyant sur notre API.</p> <ol id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li> <li><a href="#api-au-format-json" id="markdown-toc-api-au-format-json">API au format JSON</a></li> <li><a href="#identifiez-votre-application" id="markdown-toc-identifiez-votre-application">Identifiez votre application</a></li> <li><a href="#authentification" id="markdown-toc-authentification">Authentification</a> <ol> <li><a href="#authentification-via-oauth2" id="markdown-toc-authentification-via-oauth2">Authentification via OAuth2</a></li> <li><a href="#authentification-par-clé-api" id="markdown-toc-authentification-par-clé-api">Authentification par clé API</a></li> </ol> </li> <li><a href="#paramètre-firm_id" id="markdown-toc-paramètre-firm_id">Paramètre FIRM_ID</a></li> <li><a href="#test-de-lapi" id="markdown-toc-test-de-lapi">Test de l’API</a></li> <li><a href="#lecture-des-données" id="markdown-toc-lecture-des-données">Lecture des données</a></li> <li><a href="#ecriture-des-données" id="markdown-toc-ecriture-des-données">Ecriture des données</a></li> <li><a href="#champs-disponibles" id="markdown-toc-champs-disponibles">Champs disponibles</a></li> <li><a href="#pagination" id="markdown-toc-pagination">Pagination</a></li> <li><a href="#gestion-des-erreurs" id="markdown-toc-gestion-des-erreurs">Gestion des erreurs</a></li> <li><a href="#limitations-du-nombre-de-requêtes" id="markdown-toc-limitations-du-nombre-de-requêtes">Limitations du nombre de requêtes</a></li> <li><a href="#compatibilité-jsonp" id="markdown-toc-compatibilité-jsonp">Compatibilité JSONP</a></li> </ol> <h2 id="introduction"> <a href="#introduction" class="anchor-heading" aria-labelledby="introduction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Introduction </h2> <p>Une API (i.e. Application Programming Interface) est un ensemble normalisé de classes et de méthodes permettant, via n’importe quel langage de programmation, d’interagir avec un service web tel que le notre. Nous mettons à votre disposition une API de type “<a href="http://fr.wikipedia.org/wiki/Representational_state_transfer">REST</a>”, qui vous permet de manipuler les données de votre compte afin d’intégrer dans votre propre application ou site web des modules complémentaires spécifiques s’appuyant sur les données de votre compte. Vous pouvez ainsi utiliser notre API pour par exemple générer des statistiques spécifiques, automatiser votre facturation (en particulier lors de la facturation d’abonnement ou d’objet via un site d’ecommerce), exporter vos données dans un format spécifique non proposé par notre outil web, et plus généralement créer de nouvelles fonctionnalités propres à vos besoins spécifiques. L’utilisation de notre API nécessite des compétences en développement web. Si vous n’avez pas de telles compétences, vous devrez vous adresser à un prestataire informatique (SSII, studio de développement, développeur indépendant, etc.) afin de voir avec lui s’il peut vous développer ce que vous souhaitez.</p> <h2 id="api-au-format-json"> <a href="#api-au-format-json" class="anchor-heading" aria-labelledby="api-au-format-json"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API au format JSON </h2> <p>Notre API utilise le format JSON, sans élément racine (i.e. “root element”) et les noms de champs respectent la syntaxe <a href="http://fr.wikipedia.org/wiki/Snake_case">snake_case</a>. Sauf mention contraire, vous devez utiliser l’extension .json à la fin de chaque URL de l’API.</p> <h2 id="identifiez-votre-application"> <a href="#identifiez-votre-application" class="anchor-heading" aria-labelledby="identifiez-votre-application"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Identifiez votre application </h2> <p>Nous vous recommandons <strong>d’inclure dans les entêtes de vos requêtes un User-Agent</strong> avec le nom de votre application et un lien vers un formulaire de contact ou bien votre adresse email, afin que nous puissions vous contacter si nous constatons un problème dans l’utilisation que vous faites de notre API. En l’absence d’informations valides de contact, votre accès à l’API pourra être suspendu sans préavis en cas d’utilisation abusive de l’API.</p> <p><strong>Voici des exemples de User-Agent:</strong></p> <ul> <li>User-Agent: MonAppli (http://monappli.com/contact.php)</li> <li>User-Agent: Appli de Patrick (patrick@camping.test)</li> </ul> <p><strong>Remarques :</strong></p> <ul> <li>pour éviter toute erreur d’encodage de caractères, veuillez à ne pas utiliser de caractères accentués dans le champ User-Agent.</li> <li>si vous n’êtes pas en mesure de changer le User-Agent transmis par le client que vous utilisez pour faire vos requêtes, vous pouvez transmettre un User-Agent conforme en envoyant dans votre requête une entête X-User-Agent. Par exemple:</li> </ul> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'X-User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
 <span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers.json"</span>
</code></pre></div></div> <h2 id="authentification"> <a href="#authentification" class="anchor-heading" aria-labelledby="authentification"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentification </h2> <p>Notre API supporte deux protocoles d’identification:</p> <ul> <li>via le protocole OAuth2: cette méthode d’authentification est recommandée dès lors que votre application sera utilisée par de multiples utilisateurs.</li> <li>via une clé API: cette méthode d’authentification est destinée essentiellement au développement d’applications pour votre propre usage.</li> </ul> <h3 id="authentification-via-oauth2"> <a href="#authentification-via-oauth2" class="anchor-heading" aria-labelledby="authentification-via-oauth2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentification via OAuth2 </h3> <p>Lorsque vous développez une application destinée à être publique et à être utilisée par vos propres utilisateurs, nous vous encourageons à authentifier vos requêtes API via le protocole <a href="http://oauth.net/">OAuth 2</a> pour plus de simplicité et de sécurité pour vos clients. Ce protocole évite à vos utilisateurs d’avoir à communiquer leurs identifiants de connexion API manuellement, et propose donc une expérience utilisateur plus fluide lorsque celui ci souhaite autoriser votre application à accéder à ses données.</p> <p>Pour pouvoir utiliser le protocole OAuth, vous devez obligatoirement disposer d’un compte sur notre service (un compte gratuit est suffisant) et <a href="https://www.facturation.pro/oauth/applications">enregistrer votre application</a> sur notre service.</p> <h3 id="authentification-par-clé-api"> <a href="#authentification-par-clé-api" class="anchor-heading" aria-labelledby="authentification-par-clé-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Authentification par clé API </h3> <p>Lorsque vous développez une application pour votre propre usage interne, vous pouvez utiliser une authentification par clé API, plus rapide à mettre en oeuvre pour un usage personnel. Dans ce cas, chaque requête API doit être authentifiée à l’aide des informations ci-dessous, via le protocole “<a href="http://www.ietf.org/rfc/rfc2617.txt">HTTP Basic Authentication</a>”.<br /></p> <p>Vos codes d’accès à l’API sont disponible dans la rubrique <a href="https://www.facturation.pro/account/api">“Clé API”</a> de votre compte (i.e. en cliquant sur l’avatar en haut à droite de votre espace client). Si vous venez juste de créer un compte sur notre outil, vous devez activer votre compte via le lien reçu avant de pouvoir récupérer vos codes.</p> <p>A tout moment, vous pouvez générer un nouveau mot de passe API depuis votre compte.</p> <p>Vous pouvez utiliser un utilitaire tel que curl pour tester l’accès à l’API. Exemple:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
 <span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers.json"</span>
</code></pre></div></div> <h2 id="paramètre-firm_id"> <a href="#paramètre-firm_id" class="anchor-heading" aria-labelledby="paramètre-firm_id"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Paramètre FIRM_ID </h2> <p>Comme vous allez le constater en parcourant la documentation de l’API, toutes les requêtes sont préfixées par le chemin /firms/FIRM_ID . Le paramètre FIRM_ID correspond à l’identifiant de l’entreprise sur laquelle vous souhaitez travailler.<br /> Vous pouvez retrouver la liste des identifiants de votre compte dans la rubrique <a href="https://www.facturation.pro/account/api">“Clé API”</a> de votre compte (i.e. en cliquant sur l’avatar en haut à droite de votre espace client).</p> <h2 id="test-de-lapi"> <a href="#test-de-lapi" class="anchor-heading" aria-labelledby="test-de-lapi"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Test de l’API </h2> <p>Afin de tester votre application, nous vous conseillons de <a href="https://www.facturation.pro/firms/new">créer une nouvelle entreprise</a> et de ne pas passer cette entreprise en production. Vous disposerez alors d’une entreprise sur laquelle vous pourrez faire vos tests librement, sans que cela n’impacte vos données de production. Vous pouvez à tout moment ré-initialiser cette entreprise si vos données dépassent les limites de la version gratuite.</p> <h2 id="lecture-des-données"> <a href="#lecture-des-données" class="anchor-heading" aria-labelledby="lecture-des-données"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Lecture des données </h2> <p>L’API propose généralement deux types d’accès en lecture aux données : liste et détail. Les accès de type “détail” retourne un enregistrement unique, alors que les accès de type “liste” retournent un ensemble d’enregistrements.</p> <p>Toutes les requêtes de consultation sont faites avec la méthode GET. Lorsque une requête de lecture réussi, vous obtenez une réponse au format JSON accompagné du code HTTP “200 OK”. Ce type d’url peut être consulté depuis un navigateur.</p> <h2 id="ecriture-des-données"> <a href="#ecriture-des-données" class="anchor-heading" aria-labelledby="ecriture-des-données"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ecriture des données </h2> <p>La création, la modification et la suppression de données est facile a implémenter, mais ne peut pas être réalisée directement depuis un navigateur. Quel que soit le langage de développement que vous utilisez, un utilitaire tel que “curl” vous permet de faire facilement des essais et explorer l’API.</p> <p>Lorsque vous créez ou modifiez des données, vous transmettez du code JSON, et vous devez le faire savoir au système en ajoutant à vos requêtes l’entête: <code class="language-plaintext highlighter-rouge">Content-type: application/json; charset=utf-8</code>. Il vous suffit alors d’inclure vos données au format JSON dans le corps de votre requête pour que l’API effectue l’opération demandée.</p> <p>Voici un exemple de création à l’aide de curl :</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json; charset=utf-8'</span> <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"company_name":"WORLD INC"}'</span> <span class="se">\</span>
<span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers.json"</span>
</code></pre></div></div> <p>Si la création réussi, le code HTTP de retour est “201 Created” et les entêtes de la réponse contiennent une entrée “Location” indiquant l’url d’accès au nouvel élément créé. De plus, le résultat contient le détail JSON de la ressource créée.</p> <p>Sur un principe similaire, la mise à jour des enregistrements se fait à l’aide d’une requête de type PATCH. Par exemple:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json; charset=utf-8'</span> <span class="se">\</span>
 <span class="nt">-X</span> PATCH <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"company_name":"BIG CORP S.A.S"}'</span> <span class="se">\</span>
 <span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers/ID.json"</span>
</code></pre></div></div> <p>Lorsque la mise à jour réussie, vous obtenez en retour le code HTTP “200 OK”. A noter que lors d’une requête de modification, vous n’avez besoin de transmettre que les données que vous souhaitez modifier, il n’est pas nécessaire de reprendre tous les champs.</p> <p>Enfin, pour supprimer un enregistrement (si cette fonction est disponible), vous devez utiliser une requête de type DELETE. Par exemple:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
<span class="nt">-X</span> DELETE <span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers/ID.json"</span>
</code></pre></div></div> <p>Les requêtes de suppression ne nécessitent pas de “Content-Type” puisqu’elles ne contiennent pas de JSON. Si la suppression réussie, vous obtenez le code HTTP “200 OK”</p> <h2 id="champs-disponibles"> <a href="#champs-disponibles" class="anchor-heading" aria-labelledby="champs-disponibles"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Champs disponibles </h2> <p>A la fin de chaque rubrique de la documentation de l’API, nous vous indiquons la liste des champs disponibles pour l’objet concerné, avec pour chaque champs le type de donnée qu’il accepte et si ce champs est accessible en écriture ou non.<br /> Les dates doivent toujours être transmises au format AAAA-MM-DD (AAAA: année, MM: numéro du mois de 01 à 12, DD: numéro du jour de 01 à 31).<br /> Certains champs n’acceptent que des valeurs pré-définies, et dans ce cas, la liste des valeurs possibles est précisée dans la documentation.</p> <h2 id="pagination"> <a href="#pagination" class="anchor-heading" aria-labelledby="pagination"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pagination </h2> <p>Les requêtes de type liste (liste de clients, de factures, de devis, …) retournent les X premiers résultats trouvés, ainsi qu’une entête “X-Pagination” contenant un hash JSON avec les informations de pagination suivantes: nombre total d’enregistrements (total_entries), nombre d’enregistrements par page (per_page), page courante (current_page), nombre total de pages (total_pages).</p> <p>Exemple:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 OK
...
X-Pagination:<span class="o">{</span><span class="s2">"current_page"</span>:1,<span class="s2">"total_pages"</span>:10,<span class="s2">"per_page"</span>:30,<span class="s2">"total_entries"</span>:300<span class="o">}</span>
...
</code></pre></div></div> <p>Vous pouvez accéder aux différentes pages d’une liste en utilisant le paramètre “page=N” dans vos requêtes, ou N est le numéro de page souhaité.</p> <h2 id="gestion-des-erreurs"> <a href="#gestion-des-erreurs" class="anchor-heading" aria-labelledby="gestion-des-erreurs"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Gestion des erreurs </h2> <p>Si une requête échoue, vous obtiendrez des codes d’erreur HTTP spécifiques, accompagnés d’un message d’erreur. Par exemple, pour un enregistrement non trouvé, la réponse peut ressembler à:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 404 The record could not be found
Date: 2020-01-26 11:24:20 +0100
...
</code></pre></div></div> <p>A noter que lorsqu’une requête est à l’origine d’une création d’enregistrement (création d’un client, d’un produit, etc), vous obtenez un code HTTP “201 Created” en cas de succès. Les autres opérations utilisent généralement le code “200 OK” pour indiquer que l’opération a réussie.</p> <p>Voici quelques erreurs spécifiques:</p> <ul> <li>Si vous obtenez une erreur 501 lorsque vous créez ou modifiez un enregistrement, vérifiez que vous avez bien transmis votre demande avec le bon “Content-Type” (cf. plus haut)</li> <li>Une erreur 400 ou 422 indique que les données que vous transmettez sont mal formatées (i.e. JSON ou entêtes invalides). Dans ce cas, la réponse associée à ces codes d’erreur peut vous indiquer plus précisément ou se trouve l’erreur dans vos données. Dans tous les cas, lorsque vous obtenez ces codes d’erreur, nous vous invitons à vérifier les données que vous transmettez pour identifier votre problème.</li> <li>Pour les autres codes d’erreurs, consultez la réponse retournée par le système qui contient généralement plus d’informations sur les erreurs rencontrées dans le champ “errors”</li> </ul> <h2 id="limitations-du-nombre-de-requêtes"> <a href="#limitations-du-nombre-de-requêtes" class="anchor-heading" aria-labelledby="limitations-du-nombre-de-requêtes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Limitations du nombre de requêtes </h2> <p>Notre API vous autorise à réaliser :</p> <ul> <li>600 requêtes par période de 5 minutes, soit en moyenne deux requêtes par seconde</li> <li>10000 requêtes par jour</li> </ul> <p>Si vous dépassez l’une ou l’autre de ces limitations, vous receverez un code d’erreur 429, avec un message “Retry later” dans le corps de la réponse.</p> <p>Afin de suivre vos quotas, vous pouvez consulter les champs d’entête suivant:</p> <ul> <li>X-RateLimit-Limit: nombre total de requêtes autorisées</li> <li>X-RateLimit-Remaining: nombre total de requêtes restantes</li> </ul> <p>Ces limites sont suffisantes pour un usage normal de notre API. Si vous atteignez régulièrement ces limites, alors nous vous invitons à optimiser vos scripts, par exemple :</p> <ul> <li>en mettant en cache (temporaire ou permanent) les données qui ne changent pas pour ne pas avoir besoin de récupérer ces données en permanence en temps réel</li> <li>en évitant de parcourir l’ensemble de vos données, mais uniquement en parcourant les données récemment modifiées (via les paramètres de tri)</li> <li>en temporisant vos requêtes pour les étaler dans le temps</li> <li>en diminuant la fréquence d’exécution de vos scripts</li> <li>en vérifiant que vous n’avez pas des scripts inutiles qui tournent en boucle (anciens tests, boucles infinies, tache cron oubliée, etc)</li> </ul> <h2 id="compatibilité-jsonp"> <a href="#compatibilité-jsonp" class="anchor-heading" aria-labelledby="compatibilité-jsonp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compatibilité JSONP </h2> <p>L’API est compatible avec le format JSONP, vous permettant d’accéder aux méthodes de type “GET” via du javascript. Il vous suffit d’indiquer votre callback en ajoutant le paramètre “callback=monCallBack” à l’url demandée.</p> <p>Exemple de requête:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-i</span> <span class="nt">-S</span> <span class="nt">-u</span> IdentifiantApi:CleApi <span class="nt">-H</span> <span class="s1">'User-Agent: MonApp (patrick@camping.test)'</span> <span class="se">\</span>
 <span class="s2">"https://www.facturation.pro/firms/FIRM_ID/customers/ID.json?callback=afficherInfo"</span>
</code></pre></div></div> <p>Résultat:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">afficherInfo</span><span class="p">({</span>
  <span class="dl">"</span><span class="s2">account_code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">411004</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">city</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Dublin 4</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">civility</span><span class="dl">"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">company_name</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Google AdSense Payments - VAT</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">country</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IE</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">currency</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">EUR</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">individual</span><span class="dl">"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">street</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Gordon House</span><span class="se">\r\n</span><span class="s2">Barrow Street</span><span class="dl">"</span><span class="p">,</span>
  <span class="dl">"</span><span class="s2">vat_number</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">IE6388047V</span><span class="dl">"</span>
<span class="p">})</span>
</code></pre></div></div> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0"> (c) <a href="https://www.facturation.pro" target="_blank">Facturation.PRO</a> &bull; API et webservices de facturation en ligne et de gestion commerciale pour auto-entreprise, TPE et PME. </p> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
